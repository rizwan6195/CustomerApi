Knauf - MuleSoft Senior Developer Task

Main Purpose of this task was to achieve the functionality of Inserting , updating and fetching customer record from the destination system which is Azure Sql Db. An Api has been exposed which will perform different operation on Customer object on the basis of Method Type (GET, POST,PUT)

Source System is mule api deployed on cloudhub environment , destination system is Azure SQL DB .

Post:

Assuming that user wants to insert Customer Details to Azure Sql db through rest call . Below endpoints will be use along with json body to push record to the db . Customer Id will be the primary key and will be auto generated by system . In case of any error like connection , or syntax error system will throw error to the client and logs will be generated in cloudhub log of api .

Endpoint : http://customersampleapi.us-e2.cloudhub.io/customer
Method : POST
RequestBody :
 {
              "firstName": "mark",
              "lastName": "gurera",
              "companyName": "test",
              "email": "mark@test.com",
              "phone": "+493897978664"
 }
ResponseBody :
{
    "customerId": "e0a89970-ede7-42d8-9e1b-9b6c0832bf1d",
    "personalInformation": {
        "firstName": "mark",
        "lastName": "gurera",
        "companyName": "test",
        "email": "mark@test.com",
        "phone": "+493897978664"
    },
    "address": [
        {
            "street": "Steinbrueckstrasse",
            "houseNumber": 114,
            "city": "Nuremberg",
            "country": "Germany"
        }
    ]
}

P.S : customerId is a guid and generated by Mulesoft at runtime .

GET:

Assuming that user wants to fetch  Customer Details from Azure Sql db through rest call . Below endpoints will be use along with header parameter (customerId) to fetch the details In case of any error like connection , missing header or syntax error system will throw error to the client and logs will be generated in cloudhub log of api .

Endpoint : http://customersampleapi.us-e2.cloudhub.io/customer
Method : GET
RequestHeader :
 customerId : e0a89970-ede7-42d8-9e1b-9b6c0832bf1d

ResponseBody :
{
    "customerId": "e0a89970-ede7-42d8-9e1b-9b6c0832bf1d",
    "personalInformation": {
        "firstName": "mark",
        "lastName": "gurera",
        "companyName": "test",
        "email": "mark@test.com",
        "phone": "+493897978664"
    },
    "address": [
        {
            "street": "Steinbrueckstrasse",
            "houseNumber": "114",
            "city": "Nuremberg",
            "country": "Germany"
        }
    ]
}
  
P.S : customerId is a required header field .

PUT:

Assuming that user wants to update  Customer Details from Azure Sql db through rest call . Below endpoints will be use along with header parameter (customerId) and updated json body to update the details on the basis of customer id. On success user will be able to see updated record details. In case of any error like connection , missing header or syntax error system will throw error to the client and logs will be generated in cloudhub log of api .

Endpoint : http://customersampleapi.us-e2.cloudhub.io/customer
Method : PUT
RequestHeader :
 customerId : e0a89970-ede7-42d8-9e1b-9b6c0832bf1d
RequestBody :
 {
              "firstName": "talha",
              "lastName": "liaquat",
              "companyName": "capgemini",
              "email": "talha@cap.com",
              "phone": "+9715576654321"
 }

ResponseBody :
{
    "customerId": " e0a89970-ede7-42d8-9e1b-9b6c0832bf1d",
    "personalInformation": {
        "firstName": "talha",
        "lastName": "liaquat",
        "companyName": "capgemini",
        "email": "talha@cap.com",
        "phone": "+9715576654321"
    },
    "address": [
        {
            "street": "Steinbrueckstrasse",
            "houseNumber": "114",
            "city": "Nuremberg",
            "country": "Germany"
        }
    ]
}

P.S : customerId is a required header field .


Note :
Due to personal temporary account on azure and mulesoft cloudhub , some functionalities will be missing.
1)	If api throws bad request than let me know I’ll add the Mule cliudhub ip to the azure server firewall . Ip is not static as static Ip is provided to company account and I am not allowed to use company resource for Interview assignment .
2)	As I mentioned the mulesoft cloudhub account is on trial basis and I can’t use company’s account , Basic Auth is not working , in order to use basic auth I need to deploy the project on anypoint exchange which is not allowed on trial account , after deploying it on exchange , need to create a policy in api manager and to assign the policy id to application auto discovery in order to use basic Auth .

